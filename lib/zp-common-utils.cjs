"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("spark-md5"),d=(t,o=!1)=>new Promise(r=>{const e=document.createElement("input");e.multiple=o,e.type="file",t&&(e.accept=t),e.click(),e.onchange=()=>{e.files&&r([...e.files]),e.remove()}}),u=t=>{let o=null;return window.createObjectURL!=null?o=window.createObjectURL(t):window.URL!=null?o=window.URL.createObjectURL(t):window.webkitURL!=null&&(o=window.webkitURL.createObjectURL(t)),o},h=(t,o)=>new Promise((r,e)=>{if(t.size){const n=new FileReader;t.type.includes("json")?(n.onloadend=s=>{var l;const i=JSON.parse((l=s.target)==null?void 0:l.result);e((i==null?void 0:i.message)??"未知原因")},n.readAsText(t)):(n.onloadend=s=>{var i;a((i=s.target)==null?void 0:i.result,o).then(()=>r()).catch(l=>e(l))},n.readAsDataURL(t))}else e(`无法获取${o||"文件"}`)}),a=(t,o)=>new Promise((r,e)=>{if(t){const n=document.createElement("a");n.href=t,o&&(n.download=o),n.click(),r(),n.remove()}else e(`无法下载${o||"文件"}`)}),p=t=>new Promise(o=>{if(!t){o(null);return}const r=new FileReader,e=new c.ArrayBuffer;r.readAsArrayBuffer(t),r.onload=n=>{e.append(n.target.result);const s=e.end();o(s)}}),w=t=>{const r=Math.ceil(t.size/10485760),e=[];for(let n=0;n<r;n++){const s=n*10485760,i=Math.min(s+10485760,t.size),l=t.slice(s,i);e.push({index:n,data:l})}return e},m=(t,o="14px",r="1")=>{const e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="pre",e.style.lineHeight=r,e.style.fontSize=o,e.textContent=t,document.body.appendChild(e);const n=e.clientWidth,s=e.clientHeight;return document.body.removeChild(e),{width:n,height:s}},f=(t,o)=>{if(t||t===0){const r=typeof t=="number"?String(t):t;let e="",n="";return r.includes(".")?(e=r.split(".")[0],n=r.split(".")[1]):e=r,n||n==="0"?e.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+n:e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}else return o||"--"};exports.FBlobHandler=h;exports.FDownLoadHandler=a;exports.FLabelSizeCalculator=m;exports.handleFileChoose=d;exports.mapFileChunks=w;exports.mapFileMD5=p;exports.thousandSeparation=f;exports.transferFileToUrl=u;
