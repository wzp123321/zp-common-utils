(function(i,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(i=typeof globalThis<"u"?globalThis:i||self,u(i.ZpCommonUtils={}))})(this,function(i){"use strict";const u=(t,n=!1)=>new Promise(l=>{const e=document.createElement("input");e.multiple=n,e.type="file",t&&(e.accept=t),e.click(),e.onchange=()=>{e.files&&l([...e.files]),e.remove()}}),m=t=>{let n=null;return window.createObjectURL!=null?n=window.createObjectURL(t):window.URL!=null?n=window.URL.createObjectURL(t):window.webkitURL!=null&&(n=window.webkitURL.createObjectURL(t)),n},f=(t,n)=>new Promise((l,e)=>{if(t.size){const r=new FileReader;t.type.includes("json")?(r.onloadend=o=>{const s=JSON.parse(o.target?.result);e(s?.message??"未知原因")},r.readAsText(t)):(r.onloadend=o=>{h(o.target?.result,n).then(()=>l()).catch(s=>e(s))},r.readAsDataURL(t))}else e(`无法获取${n||"文件"}`)}),h=(t,n)=>new Promise((l,e)=>{if(t){const r=document.createElement("a");r.href=t,n&&(r.download=n),r.click(),l(),r.remove()}else e(`无法下载${n||"文件"}`)}),g=t=>{const l=Math.ceil(t.size/10485760),e=[];for(let r=0;r<l;r++){const o=r*10485760,s=Math.min(o+10485760,t.size),d=t.slice(o,s);e.push({index:r,data:d})}return e},p=t=>{const l=t.name.split(".");return l[l.length-1]},b=t=>{let n;const l=["B","KB","MB","GB","TB","PB"];for(n=0;n<l.length&&t>=1024;n++)t/=1024;return(Math.round(t*100)/100||0)+l[n]},S=(t,n="14px",l="1")=>{const e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="pre",e.style.lineHeight=l,e.style.fontSize=n,e.textContent=t,document.body.appendChild(e);const r=e.clientWidth,o=e.clientHeight;return document.body.removeChild(e),{width:r,height:o}},w=t=>{const n=new RegExp(`(^|&)${t}=([^&]*)(&|$)`,"i"),l=window.location.search.substring(1).match(n)??"";if(l.length>2)return decodeURIComponent(l[2])},N=(t,n)=>{if(t||t===0){const l=typeof t=="number"?String(t):t;let e="",r="";return l.includes(".")?(e=l.split(".")[0],r=l.split(".")[1]):e=l,r||r==="0"?e.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+r:e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}else return n||"--"},y=(t,n)=>{let l,e;try{l=t.toString().split(".")[1].length}catch{l=0}try{e=n.toString().split(".")[1].length}catch{e=0}const r=Math.pow(10,Math.max(l,e));return(Number(a(t,r))+Number(a(n,r)))/r},F=(t,n)=>{let l,e;try{l=t.toString().split(".")[1].length}catch{l=0}try{e=n.toString().split(".")[1].length}catch{e=0}const r=Math.pow(10,Math.max(l,e)),o=l>=e?l:e;return((Number(a(Number(t),Number(r)))-Number(a(Number(n),Number(r))))/r).toFixed(o)},a=(t,n)=>{if(t==null||n==null)return null;let l,e;try{l=t.toString().split(".")[1].length}catch{l=0}try{e=n.toString().split(".")[1].length}catch{e=0}const r=Number(t.toString().replace(".","")),o=Number(n.toString().replace(".",""));return r*o/Math.pow(10,l+e)},C=(t,n)=>{if(t==null||n==null||n==0)return null;let l,e;try{l=t.toString().split(".")[1].length}catch{l=0}try{e=n.toString().split(".")[1].length}catch{e=0}const r=Number(t.toString().replace(".","")),o=Number(n.toString().replace(".",""));return a(r/o,Math.pow(10,e-l))},U=t=>{const n=["零","一","二","三","四","五","六","七","八","九"],l=["","十","百","千","万","十","百","千","亿","十","百","千","万","十","百","千","亿"];if(!t||isNaN(t))return"零";const e=t.toString().split("");let r="";for(let o=0;o<e.length;o++){const s=e.length-1-o;r=l[o]+r;const d=e[s];r=n[d]+r}return r=r.replace(/零(千|百|十)/g,"零").replace(/十零/g,"十"),r=r.replace(/零+/g,"零"),r=r.replace(/零亿/g,"亿").replace(/零万/g,"万"),r=r.replace(/亿万/g,"亿"),r=r.replace(/零+$/,""),r=r.replace(/^一十/g,"十"),r},M=t=>{let n=t===null?"":t+"";if(!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))return"数据非法";let l="千百拾亿千百拾万千百拾元角分",e="";n+="00";let r=n.indexOf(".");r>=0&&(n=n.substring(0,r)+n.substring(r+1,2)),l=l.substring(l.length-n.length);for(var o=0;o<n.length;o++)e+="零壹贰叁肆伍陆柒捌玖".charAt(Number(n.charAt(o)))+l.charAt(o);return e.replace(/零(千|百|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(万|亿|元)/g,"$1").replace(/(亿)万|壹(拾)/g,"$1$2").replace(/^元零?|零分/g,"").replace(/元$/g,"元整")},R=(t,n)=>{const l=[];for(let e=t;e<=n;e++)l.push(e);return l},L=()=>c()+c()+c()+c()+c()+c()+c()+c(),k=()=>c()+c()+c()+c(),c=()=>(Math.floor(Math.random()*8999)+1e3).toString();i.FBlobHandler=f,i.FDownLoadHandler=h,i.FGetQueryParam=w,i.FLabelSizeCalculator=S,i.convertNumberToAmountInWords=M,i.convertToChinaNum=U,i.fileFormatSize=b,i.floatAdd=y,i.floatDivide=C,i.floatMultiply=a,i.floatSub=F,i.getFileExtension=p,i.handleFileChoose=u,i.makeRange=R,i.mapFileChunks=g,i.n4=c,i.randomNumber16=k,i.randomNumber32=L,i.thousandSeparation=N,i.transferFileToUrl=m,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
