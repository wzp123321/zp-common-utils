(function(s,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(s=typeof globalThis<"u"?globalThis:s||self,d(s.ZpCommonUtils={}))})(this,function(s){"use strict";const d=(t,i=!1)=>new Promise(o=>{const e=document.createElement("input");e.multiple=i,e.type="file",t&&(e.accept=t),e.click(),e.onchange=()=>{e.files&&o([...e.files]),e.remove()}}),a=t=>{let i=null;return window.createObjectURL!=null?i=window.createObjectURL(t):window.URL!=null?i=window.URL.createObjectURL(t):window.webkitURL!=null&&(i=window.webkitURL.createObjectURL(t)),i},u=(t,i)=>new Promise((o,e)=>{if(t.size){const n=new FileReader;t.type.includes("json")?(n.onloadend=l=>{const r=JSON.parse(l.target?.result);e(r?.message??"未知原因")},n.readAsText(t)):(n.onloadend=l=>{c(l.target?.result,i).then(()=>o()).catch(r=>e(r))},n.readAsDataURL(t))}else e(`无法获取${i||"文件"}`)}),c=(t,i)=>new Promise((o,e)=>{if(t){const n=document.createElement("a");n.href=t,i&&(n.download=i),n.click(),o(),n.remove()}else e(`无法下载${i||"文件"}`)}),h=t=>{const o=Math.ceil(t.size/10485760),e=[];for(let n=0;n<o;n++){const l=n*10485760,r=Math.min(l+10485760,t.size),p=t.slice(l,r);e.push({index:n,data:p})}return e},f=(t,i="14px",o="1")=>{const e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="pre",e.style.lineHeight=o,e.style.fontSize=i,e.textContent=t,document.body.appendChild(e);const n=e.clientWidth,l=e.clientHeight;return document.body.removeChild(e),{width:n,height:l}},m=(t,i)=>{if(t||t===0){const o=typeof t=="number"?String(t):t;let e="",n="";return o.includes(".")?(e=o.split(".")[0],n=o.split(".")[1]):e=o,n||n==="0"?e.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+n:e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}else return i||"--"};s.FBlobHandler=u,s.FDownLoadHandler=c,s.FLabelSizeCalculator=f,s.handleFileChoose=d,s.mapFileChunks=h,s.thousandSeparation=m,s.transferFileToUrl=a,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
