(function(s,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("spark-md5")):typeof define=="function"&&define.amd?define(["exports","spark-md5"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.ZpCommonUtils={},s.SparkMD5))})(this,function(s,a){"use strict";const u=(t,i=!1)=>new Promise(o=>{const e=document.createElement("input");e.multiple=i,e.type="file",t&&(e.accept=t),e.click(),e.onchange=()=>{e.files&&o([...e.files]),e.remove()}}),f=t=>{let i=null;return window.createObjectURL!=null?i=window.createObjectURL(t):window.URL!=null?i=window.URL.createObjectURL(t):window.webkitURL!=null&&(i=window.webkitURL.createObjectURL(t)),i},h=(t,i)=>new Promise((o,e)=>{if(t.size){const n=new FileReader;t.type.includes("json")?(n.onloadend=r=>{var d;const l=JSON.parse((d=r.target)==null?void 0:d.result);e((l==null?void 0:l.message)??"未知原因")},n.readAsText(t)):(n.onloadend=r=>{var l;c((l=r.target)==null?void 0:l.result,i).then(()=>o()).catch(d=>e(d))},n.readAsDataURL(t))}else e(`无法获取${i||"文件"}`)}),c=(t,i)=>new Promise((o,e)=>{if(t){const n=document.createElement("a");n.href=t,i&&(n.download=i),n.click(),o(),n.remove()}else e(`无法下载${i||"文件"}`)}),m=t=>new Promise(i=>{if(!t){i(null);return}const o=new FileReader,e=new a.ArrayBuffer;o.readAsArrayBuffer(t),o.onload=n=>{e.append(n.target.result);const r=e.end();i(r)}}),p=t=>{const o=Math.ceil(t.size/10485760),e=[];for(let n=0;n<o;n++){const r=n*10485760,l=Math.min(r+10485760,t.size),d=t.slice(r,l);e.push({index:n,data:d})}return e},w=(t,i="14px",o="1")=>{const e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.style.whiteSpace="pre",e.style.lineHeight=o,e.style.fontSize=i,e.textContent=t,document.body.appendChild(e);const n=e.clientWidth,r=e.clientHeight;return document.body.removeChild(e),{width:n,height:r}},y=(t,i)=>{if(t||t===0){const o=typeof t=="number"?String(t):t;let e="",n="";return o.includes(".")?(e=o.split(".")[0],n=o.split(".")[1]):e=o,n||n==="0"?e.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+n:e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}else return i||"--"};s.FBlobHandler=h,s.FDownLoadHandler=c,s.FLabelSizeCalculator=w,s.handleFileChoose=u,s.mapFileChunks=p,s.mapFileMD5=m,s.thousandSeparation=y,s.transferFileToUrl=f,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
